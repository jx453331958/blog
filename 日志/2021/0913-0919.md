**[淘宝前端在搭建服务上的探索](https://zhuanlan.zhihu.com/p/137470317)**

设计理念
1. 模块是天马定义的页面搭建最小单位，页面由模块组成，模块可以和数据进行关联。
2. 天马的搭建模块有几个核心的设计原则：
   1. 扁平化
   2. 跨终端
   3. 面向标准数据研发
3. 设计上需要对运营友好、方便建立多端对应关系、方便建立服务端与模块的关系；
4. 面向标准数据研发
5. 面向数据研发
6. 数据标准化
7. 模块只是做渲染，尽量少的和特定的场景绑定；
8. 搭建的核心设计——依赖去重；
9. 数据驱动展现；

> 1. 一个面向搭建域的数据接口，给到前端渲染前，实际可能会经过两次标准化，一次领域模型的标准化，确保字段是没有二义性的，然后再是一次VO的标准化，再基于视图的需求，映射到可能有二义性的模块展示上。
> 2. 后端同学来做好领域模型的标准化，然后前端在 FaaS 或者维护一个类似网关的应用进行视图模型的标准化。当然也可以前端直接从数据源直接映射到 UI 模型，只是抽象的层次不同。
> 3. 我们应该面向一个标准的数据进行研发。这个标准数据就是基于目前最底层的这些系统，商品库、用户库等等，统一命名规范后的结果。大家都遵守这个规范来给模块传递数据就可以了。
> 4. 标准化的数据格式通过先定义数据模型，然后模块尽可能去引用已有的数据模型，解决开发者都是写同一个商品模块，字段却不同的问题。否则对于后端来说，得做一套非常复杂的系统来把同样的商品数据塞到不同的模块里，同时还要适配各个模块不同的字段定义。通常后端同学也不会愿意做这个事情。
> 5. 为了确保不重复加载依赖模块造成页面大小不可控，引入了 seed 描述依赖的机制。
> 6. 搭建产物的页面都是托管在一套缓存+源站架构下的，不同的端会有一份对应的缓存副本，避免每次访问都需要重新渲染。
> 7. 天马还提供了通用的 Node.js 在线渲染引擎，用于提供统一的渲染服务，只要通过天马搭建的产物，都可以被渲染服务消费，并渲染出最后的结果给到用户访问。

---

