# 鸟哥的 Linux 私房菜

## 第 13 章：学习 shell script

1. shell script 是利用 shell 的功能所写的一个程序，这个程序是使用纯文本文件，将一些 shell 的语法与命令写在里面，搭配正则表达式、管道命令与数据流重定向等功能，以达到我们所想要的目的。
2. shell 脚本中命令的执行是从上而下，从左而右地分析与执行。
3. shell.sh 文件必须要具备可读与可执行(rx)的权限
4. 绝对路径执行命令：例如使用/home/dmtsai/shell.sh 来执行
5. 相对路径执行命令：例如./shell.sh
6. 变量“PATH”功能：将 shell.sh 放在 PATH 指定的目录内，例如：～/bin/。若 shell 在~/bin 内且具有 rx 的权限，那就直接输入 shell.sh 即可执行该脚本程序
7. 以 bash 进程来执行：通过`bash shell.sh`或`sh shell.sh`来执行。
8. shell 脚本的第一行`#!/bin/bash`声明这个 script 使用的 shell 名称。当这个程序被执行时，它就能够加载 bash 的相关环境配置文件，并且执行 bash 来使脚本中的命令能够执行。如果没有设置这一行，该程序很可能会无法执行，因为系统可能无法判断该程序需要使用什么 shell 来执行。
9. 利用直接执行的方式来执行 script: 不论是绝对路径、相对路径或者是用 bash 来执行脚本，该 script 都会使用一个新的 bash 环境来执行脚本内的命令。使用这种执行方式时，其实 script 是在子进程的 bash 内来执行的。当子进程完成后，子进程内的各项变量或操作将会结束而不会回传到父进程中。
10. 利用 source 来执行脚本：在父进程中执行。用 source 的方式来执行脚本，会在父进程中执行，因此各项操作都会在原本的 bash 内生效。
11. 判断符号`[]`
  1. 在中括号内的每个组件都需要有空格键来分隔
  2. 在中括号内的变量，最好都以双引号括号起来
  3. 在中括号内的常量，最好都以单或双引号括号起来

12. shell script 的默认变量($0, $1...)
  4. `$#`: 代表后续接的参数“个数”
  5. `$@`: 代表`$1`, `$2`, `$3`, `$4`，每个变量是独立的
  6. `$*`: 代表`$1c$2c$3c$4`，其中 c 为分隔字符，默认为空格键

13. function也是拥有内置变量的。它的内置变量与shell script很类似，函数名称代表$0，而后续接的变量也是以$1, $2...来替代的。
14. shell script的追踪与调试：`sh [-nvx] script.sh`
  7. -n: 不要执行script，仅检查语法的问题
  8. -v: 在执行script之前，先将script的内容输出到屏幕上
  9. -x: 将使用到的script内容显示到屏幕上
